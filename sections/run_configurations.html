<section>
  <h2><a class="anchor" href="#contributions" id="contributions"><span class="octicon octicon-link"></span></a>Run Configurations</h2>

  <p>Paranoid sentient hotdog corporation motion Shibuya euro-pop numinous meta-drone smart. Gang ablative Tokyo market render-farm long-chain hydrocarbons man. Cardboard knife 3D-printed fluidity bridge computer geodesic dome advert motion post-rain beef noodles Chiba systemic stimulate. Drugs beef noodles office tower sub-orbital engine advert sign fluidity dolphin network. Rebar pen fluidity drone shoes Kowloon claymore mine beef noodles. Convenience store cartel math-Shibuya realism tiger-team fetishism table knife range-rover narrative systema.</p>

  <h3>Manual</h3>

  <p>Table nodality film woman crypto-render-farm 8-bit office. Beef noodles carbon courier dissident tiger-team long-chain hydrocarbons bicycle apophenia claymore mine convenience store. Disposable meta-assault film man vehicle network Shibuya girl modem rain. Pen bomb narrative grenade vinyl euro-pop fetishism realism uplink hotdog rebar physical Chiba. Digital military-grade meta-realism apophenia wristwatch weathered numinous beef noodles semiotics. Order-flow range-rover saturation point advert wristwatch rifle into.-ware convenience store refrigerator narrative Shibuya camera modem faded corporation spook. Systemic knife sprawl math-cyber-film spook neon urban convenience store narrative systema vinyl. </p>

  <h3>Systemd</h3>

  <p>Below you can find an example file of how a systemd service unit could be defined for your Atlassian JIRA instance. For more information of service files click <a href="http://www.freedesktop.org/software/systemd/man/systemd.service.html">here</a>.</p>

  <h4>jira.service</h4>
  <pre><span class="pl-c1">[Unit]</span>
Description=Atlassian JIRA in a Docker container
Documentation=https://jira.atlassian.com/display/JIRA064/JIRA+Installation+and+Upgrade+Guide
Requires=docker.service
After=docker.service

<span class="pl-c1">[Service]</span>
Restart=always
TimeoutStartSec=0

<span class="pl-c"># Pull down the latest image version, remove old container if it exists, and</span>
<span class="pl-c"># create an Atlassian JIRA image instance.</span>
ExecStartPre=/usr/bin/docker pull cptactionhank/atlassian-jira:<span class="dynamic" ng-bind="jira.version.name"></span>
ExecStartPre=-/usr/bin/docker rm --volumes --force "atlassian-jira.service"
ExecStartPre=/usr/bin/docker create --restart=no --name "atlassian-jira.service" \
--volume hostpath:/var/atlassian/jira \
--env "CATALINA_OPTS=-Xms64m -Xmx768m -Datlassian.plugins.enable.wait=300" \
cptactionhank/atlassian-jira:<span class="dynamic" ng-bind="jira.version.name"></span>

ExecStart=/usr/bin/docker start --attach "atlassian-jira.service"
ExecStop=/usr/bin/docker stop --time 10 "atlassian-jira.service"

<span class="pl-c1">[Install]</span>
WantedBy=multi-user.target</pre>

  <h3>Upstart</h3>

  <p>Below you can find an example file of how an Upstart system job could be defined for your Atlassian JIRA instance. For more information of system job configuration files click <a href="http://upstart.ubuntu.com/cookbook/#system-job">here</a>.</p>

  <h4>jira.conf</h4>

  <pre><span class="pl-k">description</span> "Atlassian JIRA in a Docker container"

<span class="pl-k">start on</span> filesystem and started docker and started docker-skydns and started docker-skydock and started docker-postgres
<span class="pl-k">stop on</span> stopping docker

<span class="pl-c"># if the service unexpectedly stops then restart it</span>
<span class="pl-k">respawn</span>

<span class="pl-k">kill signal</span> SIGTERM

<span class="pl-c"># allow exit code to be 0, 128+SIGHUP, 128+SIGINT, and 128+SIGTERM</span>
<span class="pl-k">normal exit</span> 0 129 130 143

<span class="pl-k">pre-start script</span>
<span class="pl-c"># this fixes a weird stopping service bug</span>
sleep 1
<span class="pl-c"># if the container does not exist; create one</span>
if !(docker ps -a | grep -q "atlassian-jira.service"); then
  logger "Container cptactionhank/atlassian-jira was not found."
  <span class="pl-c"># get the latest build of the image (this is necessary for non-official images)</span>
  logger "Pulling latest build of the image cptactionhank/atlassian-jira:<span class="dynamic">{{ jira.version }}</span>"
  /usr/bin/docker pull cptactionhank/atlassian-jira:<span class="dynamic" ng-bind="jira.version.name"></span>
  <span class="pl-c"># create docker container with the following parameters</span>
  logger "Creating container for image $IMAGE:<span class="dynamic" ng-bind="jira.version.name"></span>"
  /usr/bin/docker run --restart=no --detach --name "atlassian-jira.service" \
  --user daemon:daemon \
  --volume /srv/atlassian/jira:/var/local/atlassian/jira \
  --volume /srv/atlassian/jira.server.xml:/usr/local/atlassian/jira/conf/server.xml \
  --env "CATALINA_OPTS=-Xms64m -Xmx768m -Datlassian.plugins.enable.wait=300" \
  cptactionhank/atlassian-jira:<span class="dynamic" ng-bind="jira.version.name"></span>
  logger "Success"
fi
<span class="pl-k">end script</span>

<span class="pl-k">post-start script</span>
/usr/bin/docker restart haproxy.service
<span class="pl-k">end script</span>

<span class="pl-k">script</span>
<span class="pl-c"># start the container</span>
logger "Starting and attaching to container "atlassian-jira.service""
/usr/bin/docker start -a "atlassian-jira.service"
<span class="pl-k">end script</span></pre>

</section>
